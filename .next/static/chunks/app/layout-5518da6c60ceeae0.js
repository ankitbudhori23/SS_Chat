(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},515:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,7462))},2972:(e,t,a)=>{"use strict";a.d(t,{NM:()=>r,Nv:()=>n,jT:()=>s,rG:()=>l});let l=(0,a(1990).Z0)({name:"chatList",initialState:{value:[]},reducers:{setChatList:(e,t)=>{let a=t.payload,l=Object.fromEntries(e.value.map(e=>[e.chat_group_id,e]));e.value=a.map(e=>{var t,a;let r=l[e.chat_group_id];return{...e,client_unread:null!=(a=null!=(t=null==r?void 0:r.client_unread)?t:e.unread_count)?a:0}})},unsetChatList:e=>{e.value=[]},incrementUnread:(e,t)=>{e.value=e.value.map(e=>e.chat_group_id===t.payload?{...e,client_unread:(e.client_unread||0)+1}:e)},resetUnread:(e,t)=>{e.value=e.value.map(e=>e.chat_group_id===t.payload?{...e,client_unread:0}:e)}}}),{setChatList:r,unsetChatList:u,incrementUnread:s,resetUnread:n}=l.actions},6326:(e,t,a)=>{"use strict";a.d(t,{X5:()=>r,gr:()=>u,y4:()=>l});let l=(0,a(1990).Z0)({name:"selectedChat",initialState:{value:null},reducers:{setChat:(e,t)=>{e.value=t.payload},unsetChat:e=>{e.value=null}}}),{setChat:r,unsetChat:u}=l.actions},6563:(e,t,a)=>{"use strict";a.d(t,{FB:()=>u,Fw:()=>l,IK:()=>n,tj:()=>r});let l=(0,a(1990).Z0)({name:"messages",initialState:{value:[]},reducers:{addMessage:(e,t)=>{e.value.push(t.payload)},setMessages:(e,t)=>{e.value=t.payload},unsetMessages:e=>{e.value=[]},addOlderMessages:(e,t)=>{let a=t.payload,l=new Set(e.value.map(e=>e.id));e.value=[...a.filter(e=>!l.has(e.id)),...e.value]}}}),{addMessage:r,setMessages:u,unsetMessages:s,addOlderMessages:n}=l.actions},6882:(e,t,a)=>{"use strict";a.d(t,{gV:()=>r,oN:()=>l});let l=(0,a(1990).Z0)({name:"user",initialState:{value:null},reducers:{setUser:(e,t)=>{e.value=t.payload},removeUser:e=>{e.value=null}}}),{setUser:r,removeUser:u}=l.actions},7462:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var l=a(5155),r=a(1990),u=a(2115),s=a(4540),n=a(6882),d=a(2972),i=a(6326),c=a(6563);function o(e){let{children:t}=e,[a,o]=(0,u.useState)(null);return((0,u.useEffect)(()=>{let e=(0,r.U1)({reducer:{user:n.oN.reducer,chatList:d.rG.reducer,selectedChat:i.y4.reducer,messages:c.Fw.reducer},preloadedState:function(){try{let e=localStorage.getItem("reduxState");if(!e)return;return JSON.parse(e)}catch(e){console.warn("Could not load state,",e);return}}()});e.subscribe(()=>{var t=e.getState();try{let e=JSON.stringify(t);localStorage.setItem("reduxState",e)}catch(e){console.warn("Could not save state,",e)}}),o(e)},[]),a)?(0,l.jsx)(s.Kq,{store:a,children:t}):null}}},e=>{e.O(0,[690,540,990,441,964,358],()=>e(e.s=515)),_N_E=e.O()}]);